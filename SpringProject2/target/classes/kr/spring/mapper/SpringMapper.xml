<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.spring.mapper.SpringMapper"> 
<!-- 로그인 및 회원가입 -->

    <insert id="JoinUser">
	    insert into t_member(m_id, m_pw, m_name, m_phone, m_type, m_joindate, admin_yn) 
	    values (#{m_id}, #{m_pw}, #{m_name}, #{m_phone}, #{m_type}, sysdate, 'N')
	</insert>
	
	<insert id="JoinFire">
	    insert into t_member(m_id, m_pw, m_name, m_phone, m_type, m_joindate, admin_yn) 
	    values (#{m_id}, #{m_pw}, #{m_name}, #{m_phone}, #{m_type}, sysdate, 'N')
	</insert>
	
	<select id ="Login" resultType="kr.spring.domain.Member" parameterType="String">
	    select * from t_member where m_id=#{m_id} and m_pw=#{m_pw} 
	</select>
	
<!-- 신고페이지 -->

	<insert id="ReportlatInsert">
	    insert into t_report( m_id, re_loc, re_date, re_latitude, re_longitude) values( #{m_id}, #{re_loc}, sysdate, #{re_latitude}, #{re_longitude})
	</insert>

	<select id="ReportSelectSeq"  resultType="Integer" parameterType="String">
	    SELECT re_seq FROM t_report WHERE re_seq = (SELECT max(re_seq) FROM t_report) and m_id = #{m_id}
	</select>
	
	<update id="ReportInsert" parameterType="String">
	    update t_report set re_type = #{re_type}, re_content = #{re_content} where re_seq = #{re_seq}
	</update>
	
	<delete id="ReportlatDelete" parameterType="String">
	    delete from t_report where re_seq = #{re_seq}
	</delete>
	
<!-- 신고접수페이지 -->

	<select id="ReportTaking" resultType="kr.spring.domain.Report">
	    select * from t_report
	</select>
	<select id="ReportDetail" resultType="kr.spring.domain.Report">
	    select * from t_report where re_seq = #{re_seq}
	</select>

</mapper>